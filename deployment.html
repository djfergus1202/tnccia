<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deployment Guide - Chemistry Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #1a1a1a;
            color: #e9ecef;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .navbar-dark { background-color: #0d1421 !important; }
        .card { background-color: #2d3748; border: 1px solid #4a5568; }
        .btn-primary { background-color: #4299e1; border-color: #4299e1; }
        .platform-card { 
            transition: transform 0.2s; 
            height: 100%;
            cursor: pointer;
        }
        .platform-card:hover { transform: translateY(-5px); }
        .platform-logo { 
            width: 60px; 
            height: 60px; 
            border-radius: 10px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: 24px; 
            margin-bottom: 15px;
        }
        .heroku-logo { background: linear-gradient(45deg, #6762a6, #9b59b6); }
        .railway-logo { background: linear-gradient(45deg, #0066ff, #00ccff); }
        .do-logo { background: linear-gradient(45deg, #0080ff, #0066cc); }
        .aws-logo { background: linear-gradient(45deg, #ff9900, #ff6600); }
        pre { background-color: #1a1d29; border: 1px solid #4a5568; }
        .alert-info { background-color: #1e3a8a; border-color: #3b82f6; color: #e9ecef; }
        .alert-success { background-color: #065f46; border-color: #10b981; color: #e9ecef; }
        .alert-warning { background-color: #92400e; border-color: #f59e0b; color: #e9ecef; }
        .cost-badge { 
            background-color: #065f46; 
            color: white; 
            padding: 4px 8px; 
            border-radius: 12px; 
            font-size: 0.8rem;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html"><i data-feather="atom"></i> ChemPlatform</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="index.html">Home</a>
                <a class="nav-link" href="setup-guide.html">Setup</a>
                <a class="nav-link" href="github-setup.html">GitHub</a>
                <a class="nav-link active" href="deployment.html">Deploy</a>
            </div>
        </div>
    </nav>

    <div class="container py-5">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <h1 class="mb-4"><i data-feather="cloud"></i> Production Deployment</h1>
                <p class="lead">Deploy your Chemistry Platform to production hosting services</p>

                <!-- Platform Comparison -->
                <div class="row mb-5">
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card platform-card" data-bs-toggle="modal" data-bs-target="#herokuModal">
                            <div class="card-body text-center">
                                <div class="platform-logo heroku-logo mx-auto">
                                    <i data-feather="box"></i>
                                </div>
                                <h5 class="card-title">Heroku</h5>
                                <p class="card-text">Easy deployment platform</p>
                                <span class="cost-badge">$5-10/month</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card platform-card" data-bs-toggle="modal" data-bs-target="#railwayModal">
                            <div class="card-body text-center">
                                <div class="platform-logo railway-logo mx-auto">
                                    <i data-feather="zap"></i>
                                </div>
                                <h5 class="card-title">Railway</h5>
                                <p class="card-text">Modern developer platform</p>
                                <span class="cost-badge">$5/month</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card platform-card" data-bs-toggle="modal" data-bs-target="#doModal">
                            <div class="card-body text-center">
                                <div class="platform-logo do-logo mx-auto">
                                    <i data-feather="droplet"></i>
                                </div>
                                <h5 class="card-title">DigitalOcean</h5>
                                <p class="card-text">App Platform</p>
                                <span class="cost-badge">$5-12/month</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 mb-4">
                        <div class="card platform-card" data-bs-toggle="modal" data-bs-target="#awsModal">
                            <div class="card-body text-center">
                                <div class="platform-logo aws-logo mx-auto">
                                    <i data-feather="server"></i>
                                </div>
                                <h5 class="card-title">AWS</h5>
                                <p class="card-text">Elastic Beanstalk</p>
                                <span class="cost-badge">$10-20/month</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Automated Deployment -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i data-feather="zap"></i> Automated Deployment Script</h5>
                    </div>
                    <div class="card-body">
                        <p>Use the included automation script for guided deployment:</p>
                        <pre><code class="language-bash"># Navigate to your extracted package
cd chemistry-platform-github

# Make script executable
chmod +x deploy.sh

# Run automated deployment
./deploy.sh</code></pre>
                        
                        <p>The script offers these options:</p>
                        <ul>
                            <li><strong>Option 1:</strong> Deploy to Heroku (guided setup)</li>
                            <li><strong>Option 2:</strong> Deploy to Railway (guided setup)</li>
                            <li><strong>Option 3:</strong> Setup local development</li>
                            <li><strong>Option 4:</strong> Run health checks</li>
                        </ul>
                        
                        <div class="alert alert-info">
                            <i data-feather="info"></i> The script will guide you through API key setup, database configuration, and deployment
                        </div>
                    </div>
                </div>

                <!-- Prerequisites -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i data-feather="check-square"></i> Pre-Deployment Checklist</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Required API Keys</h6>
                                <ul class="list-unstyled">
                                    <li>✅ <strong>Discord Bot Token</strong> - <a href="https://discord.com/developers/applications" target="_blank">Discord Developer Portal</a></li>
                                    <li>✅ <strong>Google Gemini API Key</strong> - <a href="https://aistudio.google.com/" target="_blank">Google AI Studio</a></li>
                                    <li>✅ <strong>Session Secret</strong> - Random 32+ character string</li>
                                    <li>✅ <strong>Database URL</strong> - PostgreSQL connection (auto-configured on most platforms)</li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <h6>Optional Keys</h6>
                                <ul class="list-unstyled">
                                    <li>⚪ <strong>OpenAI API Key</strong> - Enhanced features</li>
                                    <li>⚪ <strong>Prodia API Key</strong> - Additional image generation</li>
                                </ul>
                                
                                <h6 class="mt-3">GitHub Repository</h6>
                                <ul class="list-unstyled">
                                    <li>✅ Code uploaded to GitHub</li>
                                    <li>✅ Repository is public or accessible</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cost Breakdown -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0"><i data-feather="dollar-sign"></i> Cost Breakdown</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-dark">
                                <thead>
                                    <tr>
                                        <th>Platform</th>
                                        <th>App Hosting</th>
                                        <th>Database</th>
                                        <th>Total/Month</th>
                                        <th>Best For</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Heroku</strong></td>
                                        <td>$5 (Basic Dyno)</td>
                                        <td>$5 (Mini Postgres)</td>
                                        <td><strong>$10/month</strong></td>
                                        <td>Beginners, Easy setup</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Railway</strong></td>
                                        <td>$5 (Pro Plan)</td>
                                        <td>Included</td>
                                        <td><strong>$5/month</strong></td>
                                        <td>Modern, Developer-friendly</td>
                                    </tr>
                                    <tr>
                                        <td><strong>DigitalOcean</strong></td>
                                        <td>$5 (Basic App)</td>
                                        <td>$7 (Managed DB)</td>
                                        <td><strong>$12/month</strong></td>
                                        <td>Scalability, Control</td>
                                    </tr>
                                    <tr>
                                        <td><strong>AWS</strong></td>
                                        <td>$10+ (Elastic Beanstalk)</td>
                                        <td>$5+ (RDS)</td>
                                        <td><strong>$15+/month</strong></td>
                                        <td>Enterprise, Advanced features</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="alert alert-success">
                            <i data-feather="info"></i> <strong>Recommendation:</strong> Start with Railway ($5/month) for best value, or Heroku ($10/month) for easiest setup
                        </div>
                    </div>
                </div>

                <!-- Verification -->
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i data-feather="check-circle"></i> Post-Deployment Verification</h5>
                    </div>
                    <div class="card-body">
                        <p>After deployment, verify these endpoints work:</p>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Health Checks</h6>
                                <pre><code class="language-bash"># Application health
curl https://your-app.herokuapp.com/health

# Expected response:
{
  "status": "healthy",
  "features": {
    "video_generation": true,
    "discord_commands": 53,
    "research_system": true
  }
}</code></pre>
                            </div>
                            <div class="col-md-6">
                                <h6>Web Interface</h6>
                                <ul>
                                    <li>Visit your app URL in browser</li>
                                    <li>Check results page: <code>/results</code></li>
                                    <li>Test download: <code>/results/1/download</code></li>
                                </ul>
                                
                                <h6 class="mt-3">Discord Bot</h6>
                                <ul>
                                    <li>Bot shows online in Discord</li>
                                    <li>Test: <code>/create-simple-video topic:test</code></li>
                                    <li>Results appear in web interface</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Heroku Modal -->
    <div class="modal fade" id="herokuModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark">
                <div class="modal-header">
                    <h5 class="modal-title"><i data-feather="box"></i> Deploy to Heroku</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <h6>Automated Heroku Deployment</h6>
                    <p>Use the deployment script for guided setup:</p>
                    <pre><code class="language-bash">./deploy.sh
# Choose option 1: Deploy to Heroku</code></pre>
                    
                    <h6 class="mt-3">Manual Heroku Deployment</h6>
                    <pre><code class="language-bash"># Install Heroku CLI
curl https://cli-assets.heroku.com/install.sh | sh

# Login and create app
heroku login
heroku create your-chemistry-platform

# Add PostgreSQL database
heroku addons:create heroku-postgresql:mini

# Set environment variables
heroku config:set DISCORD_BOT_TOKEN="your_token"
heroku config:set GEMINI_API_KEY="your_key"
heroku config:set SESSION_SECRET="your_secret"

# Deploy from GitHub
# Connect repository in Heroku dashboard
# Enable automatic deploys</code></pre>
                    
                    <div class="alert alert-info">
                        <strong>Cost:</strong> $5/month for app + $5/month for database = $10/month total
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Railway Modal -->
    <div class="modal fade" id="railwayModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark">
                <div class="modal-header">
                    <h5 class="modal-title"><i data-feather="zap"></i> Deploy to Railway</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <h6>Automated Railway Deployment</h6>
                    <p>Use the deployment script for guided setup:</p>
                    <pre><code class="language-bash">./deploy.sh
# Choose option 2: Deploy to Railway</code></pre>
                    
                    <h6 class="mt-3">Manual Railway Deployment</h6>
                    <pre><code class="language-bash"># Install Railway CLI
npm install -g @railway/cli

# Login and deploy
railway login
railway init
railway add postgresql

# Set environment variables
railway variables set DISCORD_BOT_TOKEN="your_token"
railway variables set GEMINI_API_KEY="your_key"
railway variables set SESSION_SECRET="your_secret"

# Deploy
railway up</code></pre>
                    
                    <div class="alert alert-success">
                        <strong>Best Value:</strong> $5/month includes app hosting and database
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- DigitalOcean Modal -->
    <div class="modal fade" id="doModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark">
                <div class="modal-header">
                    <h5 class="modal-title"><i data-feather="droplet"></i> Deploy to DigitalOcean</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <h6>App Spec Configuration</h6>
                    <p>Create <code>app.yaml</code> in your repository:</p>
                    <pre><code class="language-yaml">name: chemistry-platform
services:
- name: web
  source_dir: /
  github:
    repo: your-username/chemistry-platform
    branch: main
  run_command: gunicorn main:app --bind 0.0.0.0:$PORT
  environment_slug: python
  instance_size_slug: basic-xxs
  envs:
  - key: DISCORD_BOT_TOKEN
    scope: RUN_TIME
    type: SECRET
  - key: GEMINI_API_KEY
    scope: RUN_TIME
    type: SECRET
databases:
- name: chemistry-db
  engine: PG</code></pre>
                    
                    <h6 class="mt-3">Deploy</h6>
                    <pre><code class="language-bash"># Install doctl
snap install doctl

# Deploy
doctl apps create --spec app.yaml</code></pre>
                </div>
            </div>
        </div>
    </div>

    <!-- AWS Modal -->
    <div class="modal fade" id="awsModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark">
                <div class="modal-header">
                    <h5 class="modal-title"><i data-feather="server"></i> Deploy to AWS</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <h6>Elastic Beanstalk Deployment</h6>
                    <p>Create <code>application.py</code>:</p>
                    <pre><code class="language-python">from main import app

if __name__ == "__main__":
    app.run()</code></pre>
                    
                    <p>Create <code>.ebextensions/python.config</code>:</p>
                    <pre><code class="language-yaml">option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: application.py
  aws:elasticbeanstalk:application:environment:
    DISCORD_BOT_TOKEN: your_token
    GEMINI_API_KEY: your_key</code></pre>
                    
                    <h6 class="mt-3">Deploy</h6>
                    <pre><code class="language-bash"># Install EB CLI
pip install awsebcli

# Initialize and deploy
eb init chemistry-platform
eb create chemistry-platform-prod
eb deploy</code></pre>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>feather.replace();</script>
</body>
</html>